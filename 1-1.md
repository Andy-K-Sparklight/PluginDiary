# 1-1 从 Minecraft 到 Bukkit

## Minecraft 的 C/S 架构

### 多人游戏的运作

如果你经常玩 Minecraft 多人游戏，你可能会问一个问题：**为什么我每次都要输入一个域名呢**？

域名被解析到一个 IP 地址上，一个 IP 地址代表了一个**服务器**，服务器也是一台计算机。

在你（玩家）的电脑上运作的那个叫做**客户端**，而那个远在几千公里之外的计算机……就叫**服务器**。

服务器是在多人游戏中**用来交换玩家间数据**的。客户端把数据发送给服务器，服务器把数据发送给其它客户端。

### 服务端世界的复制品

当一个 Minecraft 服务器开始运转时，那里生成了一个世界。

客户端加入游戏时，将世界的相关信息下载下来（相当于复制一份），并在本地运转起来。

当服务端或客户端发生了什么事情时，客户端（或服务端）会使用一种名为**数据包**的东西传递信息，收到数据包的一方根据其中的内容，更新自己的那个世界。

## 插件运行的原理

### 利用原版的机制

从未接触过插件开发的人，可能觉得插件像魔法一样。

> 天呐！这种命令是怎么实现的嘛！怎么会有这样的附魔呢？为什么没登录我就不能动呢？

实际上插件不是什么魔法，它只是利用了原版的机制而已。

客户端执行一些操作之前（如显示物品），都会向服务端请求相关信息（如物品附魔），**一旦服务端有机会干预客户端，插件就有了用武之地**。

插件程序发送对应的数据包，或者修改服务端发送的数据，蒙了客户端一把，让客户端显示了想要的信息。

形象地说，有人给你寄一封信，结果邮局被插件劫持了，把那封信的内容改了一下，再发给你，你会知道吗？

如果你照做了（就像 Minecraft 客户端一样），你就被「骗」了，这个效果就相当于插件控制客户端。